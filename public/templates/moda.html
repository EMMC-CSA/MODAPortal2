<div class="sectionContainer">
    <div class="sectionContent">
        <div class="subsectionContainer">
            <div class="sectionHeader">
                <button class="customBtn" ng-click="save()">SAVE</button>
                <button class="customBtn"> / </button>
                <button class="customBtn cancelBtn" ng-click="go('/modas')">MODA DASHBOARD</button>
            </div>
            <div class="subsectionContent">
                <form name="modaForm" id="modaForm">
                    <div class="inputwrapper">
                        <div class="inputlabel mainSectionTitle">
                            <span>CREATE/UPDATE YOUR MODA</span>
                            <div class="inputsublabel">
                                Click SHOW / HIDE on each section to toggle visibility
                            </div>
                        </div>
                        <div class="subinputwrapper">
                            <div class="inputlabel">USE CASE (SHORT TITLE):</div>
                            <input class="input" type="text" ng-model="modaData.usecase_title" maxlength="25"></input>
                        </div>

                        <div class="subinputwrapper">
                            <div class="inputlabel">PROJECT (NAME/ACRONYM):</div>
                            <input class="input" type="text" ng-model="modaData.project_name" maxlength="25"></input>
                        </div>
                        <div class="subinputwrapper">
                            <div class="inputlabel mainSectionSubTitle">
                                <span>OVERVIEW OF THE SIMULATION |</span>
                                <button class="customBtn smallerBtn showBtn" ng-show="!ui.showOverview" ng-click="toggleOverview()">[SHOW]</button>
                                <button class="customBtn smallerBtn hideBtn" ng-show="ui.showOverview" ng-click="toggleOverview()">[HIDE]</button>
                            </div>
                            <div class="genericleftborder" ng-show="ui.showOverview">
                                <div class="subinputwrapper">
                                    <div class="inputlabel">USE CASE (DESCRIPTION):</div>
                                    <textarea class="input" rows="4" cols="50" ng-model="modaData.simulation_overview.usecase_desc"></textarea>
                                </div>
                                <div class="subinputwrapper">
                                    <div class="inputlabel">PUBLICATION(S) PEERREVIEWING THE SIMULATION:</div>
                                    <textarea class="input" rows="2" cols="40" ng-model="modaData.simulation_overview.publications_peer"></textarea>
                                </div>
                                <div class="subinputwrapper">
                                    <div class="inputlabel">ACCESS CONDITIONS:</div>
                                    <textarea class="input" rows="1" cols="40" ng-model="modaData.simulation_overview.access_conditions"></textarea>
                                </div>
                                <div class="subinputwrapper nomarginbtm">
                                    <div class="inputlabel">WORKFLOW AND ITS RATIONALE:</div>
                                    <textarea class="input" rows="4" cols="40" ng-model="modaData.simulation_overview.workflow_rationale"></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="subinputwrapper">
                            <div class="inputlabel mainSectionSubTitle">
                                <span>MODA WORKFLOW PLOT |</span>
                                <button class="customBtn smallerBtn showBtn" ng-show="!ui.showWorkflow" ng-click="toggleWorkflow()">[SHOW]</button>
                                <button class="customBtn smallerBtn hideBtn" ng-show="ui.showWorkflow" ng-click="toggleWorkflow()">[HIDE]</button>
                                <button class="customBtn smallerBtn" ng-click="regenerateworkflow()">[UPDATE WORKFLOW PLOT]</button>
                            </div>
                            <div class="subinputwrapper genericleftborder" ng-show="ui.showWorkflow">
                                <div id="graphVizContainer">WORKFLOW PLOT WILL BE GENERATED HERE AS YOU ADD AND CONNECT (LINK/COUPLE) MODELS</div>
                            </div>
                        </div>
                        <div class="subinputwrapper">
                            <div class="inputlabel mainSectionSubTitle">
                                <span>MODELS | </span>
                                <button class="customBtn smallerBtn" ng-click="addmodel()">[ADD MODEL]</button>
                                <button class="customBtn smallerBtn" ng-click="regenerateworkflow()">[UPDATE WORKFLOW PLOT]</button>
                            </div>
                            <div class="subinputwrapper genericleftborder" ng-show="ui.showModels">
                                <div class="entityWrapper" ng-repeat="model in modaData.models track by $index">
                                    <div class="inputlabel hContent" style="margin-bottom: 20px;">
                                        <div>
                                            <span><b>MODEL {{$index+1}} | </b></span>
                                            <button class="customBtn smallerBtn showBtn" ng-show="expandedModels.indexOf($index)<0" ng-click="expandModel($index)">[SHOW]</button>
                                            <button class="customBtn smallerBtn hideBtn" ng-show="expandedModels.indexOf($index)>-1" ng-click="collapseModel($index)">[HIDE]</button>
                                            <button class="customBtn smallerBtn" ng-click="removemodel($index)" style="color: red">[REMOVE]</button>
                                        </div>
                                        <div class="inputwrapperH">
                                            <div class="inputlabel autoWidth">| <b>LINK</b> TO MODEL(S):</div>
                                            <select chosen class="input multiInput" ng-model="model.link_to_models" multiple data-placeholder="SELECT MODEL(S)">
                                                <option ng-repeat="modelsub in modaData.models track by $index" ng-if="model.index !== $index && !hasCoupled(model, $index)" ng-value="modelsub.number">{{modelsub.number}}</option>
                                            </select>
                                        </div>
                                        <div class="inputwrapperH">
                                            <div class="inputlabel autoWidth">| <b>COUPLE</b> TO MODEL(S):</div>
                                            <select chosen class="input multiInput" ng-model="model.couple_to_models" ng-change="modifyCoupling(model)" multiple data-placeholder="SELECT MODEL(S)">
                                                <option ng-repeat="modelsub in modaData.models track by $index" ng-if="model.index !== $index" ng-value="modelsub.number">{{modelsub.number}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div ng-show="expandedModels.indexOf($index)>-1">
                                        <div class="inputsublabel">
                                            Choose the model's main and sub- types according to the <a href="https://emmc.info/wp-content/uploads/2017/12/KI0616197ENN.en_.pdf" target="_blank">Review of Material Modelling (RoMM)</a>
                                        </div>
                                        <div class="inputwrapper">
                                            <div class="inputlabel">MAIN TYPE:</div>
                                            <select chosen max-selected-options="1" class="input" ng-model="model.type" ng-change="modifyModelType(model)" ng-options="modelType.name as modelType.name for modelType in modelTypes" multiple placeholder-text-multiple="'SELECT TYPE'">
                                            </select>
                                            <div class="inputlabel">SUBTYPE:</div>
                                            <select chosen max-selected-options="1" class="input" ng-model="model.subtype_1" ng-change="modifyModelSubType1(model)" ng-options="subtype.name as subtype.name for subtype in model.typeobj.elements" multiple placeholder-text-multiple="'SELECT SUBTYPE 1'">
                                            </select>
                                            <div ng-if="model.subtype_1obj.elements.length > 0">
                                                <div class="inputlabel">SUBTYPE:</div>
                                                <select chosen max-selected-options="1" class="input" ng-model="model.subtype_2" ng-change="modifyModelSubType2(model)" ng-options="subtype.name as subtype.name for subtype in model.subtype_1obj.elements" multiple placeholder-text-multiple="'SELECT SUBTYPE 2'">
                                                </select>
                                            </div>
                                            <div ng-if="model.subtype_2obj.elements.length > 0">
                                                <div class="inputlabel">SUBTYPE:</div>
                                                <select chosen max-selected-options="1" class="input" ng-model="model.subtype_3"  ng-options="subtype.name as subtype.name for subtype in model.subtype_2obj.elements" multiple placeholder-text-multiple="'SELECT SUBTYPE 3'">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="inputwrapper">
                                            <div class="inputlabel">MODEL NAME:</div>
                                            <input class="input" type="text" ng-model="model.name" maxlength="40"></input>
                                        </div>
                                        <div class="inputwrapper">
                                            <div class="inputlabel">ENTITY:</div>
                                            <div class="setValue">{{model.entity}}</div>
                                        </div>
                                        <div class="inputwrapper">
                                            <div class="inputlabel mainSectionSubSubTitle aspectbg">
                                                <span>ASPECT OF THE USER CASE/SYSTEM TO BE SIMULATED</span>
                                                <button class="customBtn smallerBtn showBtn" ng-show="expandedAspects.indexOf($index)<0" ng-click="expandAspect($index)">[SHOW]</button>
                                                <button class="customBtn smallerBtn hideBtn" ng-show="expandedAspects.indexOf($index)>-1" ng-click="collapseAspect($index)">[HIDE]</button>
                                            </div>
                                            <div class="subinputwrapper aspectleftborder" ng-show="expandedAspects.indexOf($index)>-1">
                                                <div class="inputwrapper">
                                                    <div class="inputlabel">ASPECT TO BE SIMULATED:</div>
                                                    <textarea class="input" rows="4" cols="50" ng-model="model.simulation_aspect.aspect"></textarea>
                                                </div>
                                                <div class="inputwrapper">
                                                    <div class="inputlabel">MATERIAL:</div>
                                                    <textarea class="input" rows="4" cols="40" ng-model="model.simulation_aspect.material"></textarea>
                                                </div>
                                                <div class="inputwrapper">
                                                    <div class="inputlabel">GEOMETRY:</div>
                                                    <textarea class="input" rows="4" cols="40" ng-model="model.simulation_aspect.geomtry"></textarea>
                                                </div>
                                                <div class="inputwrapper">
                                                    <div class="inputlabel">TIME LAPSE:</div>
                                                    <textarea class="input" rows="1" cols="40" ng-model="model.simulation_aspect.time_lapse"></textarea>
                                                </div>
                                                <div class="inputwrapper">
                                                    <div class="inputlabel">MANUFACTURING PROCESS OR IN-SERVICE CONDITIONS:</div>
                                                    <textarea class="input" rows="4" cols="40" ng-model="model.simulation_aspect.manufacturing_process_conditions"></textarea>
                                                </div>
                                                <div class="inputwrapper nomarginbtm">
                                                    <div class="inputlabel">PUBLICATION(S) ON THIS DATA:</div>
                                                    <textarea class="input" rows="1" cols="40" ng-model="model.simulation_aspect.publications"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="inputwrapper">
                                            <div class="inputlabel mainSectionSubSubTitle genphysicsbg">
                                                <span>GENERIC PHYSICS OF THE MODEL EQUATION</span>
                                                <button class="customBtn smallerBtn showBtn" ng-show="expandedGenPhysics.indexOf($index)<0" ng-click="expandGenPhysics($index)">[SHOW]</button>
                                                <button class="customBtn smallerBtn hideBtn" ng-show="expandedGenPhysics.indexOf($index)>-1" ng-click="collapseGenPhysics($index)">[HIDE]</button>
                                            </div>
                                            <div class="genphysicsleftborder" ng-show="expandedGenPhysics.indexOf($index)>-1">
                                                <div class="subinputwrapper">
                                                    <div class="inputlabel"><span>PHYSICS EQUATIONS | </span><button class="customBtn smallerBtn" ng-click="addphyseq(model)">[ADD]</button></div>
                                                    <div class="subinputwrapper">
                                                        <div class="entityWrapper" ng-repeat="physicseq in model.physics_equations track by $index">
                                                            <div class="inputlabel" style="margin-bottom: 20px;">
                                                                <span><b>EQUATION {{$index+1}} | </b></span>
                                                                <button class="customBtn smallerBtn showBtn" ng-show="expandedPhysEqs.indexOf($index)<0" ng-click="expandphyseq($index)">[SHOW]</button>
                                                                <button class="customBtn smallerBtn hideBtn" ng-show="expandedPhysEqs.indexOf($index)>-1" ng-click="collapsephyseq($index)">[HIDE]</button>
                                                                <button class="customBtn smallerBtn" ng-click="removephyseq(model, $index)" style="color: red">[REMOVE]</button>
                                                            </div>
                                                            <div ng-show="expandedPhysEqs.indexOf($index)>-1">
                                                                <div class="inputwrapper">
                                                                    <div class="inputlabel">PASTE MATHML/LATEX EQUATION: <a href="https://stemreader.org.uk/support/copy-word-equation/" target="_blank">[HOW-TO IN MICROSOFT WORD]</a></div>
                                                                    <textarea class="input" rows="1" cols="50" ng-model="physicseq.mathml_tex_equation"></textarea>
                                                                    <div class="subinputwrapper">
                                                                        <div class="inputlabel">EQUATION:</div>
                                                                        <div class="setValue" mathjax-bind="physicseq.mathml_tex_equation"></div>
                                                                    </div>
                                                                </div>
                                                                <div class="inputwrapper">
                                                                    <div class="inputlabel">NAME:</div>
                                                                    <textarea class="input" rows="1" cols="40" ng-model="physicseq.name" maxlength="40"></textarea>
                                                                </div>
                                                                <div class="inputwrapper">
                                                                    <div class="inputlabel">DESCRIPTION:</div>
                                                                    <textarea class="input" rows="4" cols="40" ng-model="physicseq.description"></textarea>
                                                                </div>
                                                                <div class="inputwrapper">
                                                                    <div class="inputlabel"><span>PHYSICS QUANTITIES | </span><button class="customBtn smallerBtn" ng-click="addphysquant(physicseq)">[ADD]</button></div>
                                                                    <div class="subinputwrapper">
                                                                        <div class="entityWrapper" ng-repeat="physicsquant in physicseq.physics_quantities">
                                                                            <div class="inputlabel" style="margin-bottom: 20px;">
                                                                                <span><b>QUANTITY {{$index+1}} | </b></span>
                                                                                <button class="customBtn smallerBtn" ng-click="removephysquant(physicseq, $index)" style="color: red">[REMOVE]</button>
                                                                            </div>
                                                                            <div>
                                                                                <div class="inputwrapper">
                                                                                    <div class="inputlabel">MATH SYMBOL:</div>
                                                                                    <input class="input" type="text" ng-model="physicsquant.math_symbol"></input>
                                                                                    <div class="subinputwrapper">
                                                                                        <div class="setValue" mathjax-bind="physicsquant.math_symbol"></div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="inputwrapper">
                                                                                    <div class="inputlabel">DESCRIPTION:</div>
                                                                                    <textarea class="input" rows="1" cols="40" ng-model="physicsquant.description"></textarea>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="subinputwrapper nomarginbtm">
                                                    <div class="inputlabel"><span>MATERIALS RELATIONS | </span><button class="customBtn smallerBtn" ng-click="addmaterialsrel(model)">[ADD]</button></div>
                                                    <div class="subinputwrapper">
                                                        <div class="entityWrapper" ng-repeat="materialrel in model.materials_relations track by $index">
                                                            <div class="inputlabel" style="margin-bottom: 20px;">
                                                                <span><b>RELATION {{$index+1}} | </b></span>
                                                                <button class="customBtn smallerBtn showBtn" ng-show="expandedMatRels.indexOf($index)<0" ng-click="expandmaterialsrel($index)">[SHOW]</button>
                                                                <button class="customBtn smallerBtn hideBtn" ng-show="expandedMatRels.indexOf($index)>-1" ng-click="collapsematerialsrel($index)">[HIDE]</button>
                                                                <button class="customBtn smallerBtn" ng-click="removematerialsrel(model, $index)" style="color: red">[REMOVE]</button>
                                                            </div>
                                                            <div ng-show="expandedMatRels.indexOf($index)>-1">
                                                                <div class="inputwrapper">
                                                                    <div class="inputlabel">PASTE MATHML/LATEX EQUATION: <a href="https://stemreader.org.uk/support/copy-word-equation/" target="_blank">[HOW-TO IN MICROSOFT WORD]</a></div>
                                                                    <textarea class="input" rows="1" cols="50" ng-model="materialrel.mathml_tex_equation"></textarea>
                                                                    <div class="subinputwrapper">
                                                                        <div class="inputlabel">EQUATION:</div>
                                                                        <div class="setValue" mathjax-bind="materialrel.mathml_tex_equation"></div>
                                                                    </div>
                                                                </div>
                                                                <div class="inputwrapper">
                                                                    <div class="inputlabel">NAME:</div>
                                                                    <textarea class="input" rows="1" cols="40" ng-model="materialrel.name"  maxlength="40"></textarea>
                                                                </div>
                                                                <div class="inputwrapper">
                                                                    <div class="inputlabel">DESCRIPTION:</div>
                                                                    <textarea class="input" rows="4" cols="40" ng-model="materialrel.description"></textarea>
                                                                </div>
                                                                <div class="inputwrapper">
                                                                    <div class="inputlabel"><span>PHYSICS QUANTITIES | </span><button class="customBtn smallerBtn" ng-click="addmatquant(materialrel)">[ADD]</button></div>
                                                                    <div class="subinputwrapper">
                                                                        <div class="entityWrapper" ng-repeat="matquant in materialrel.material_quantities">
                                                                            <div class="inputlabel" style="margin-bottom: 20px;">
                                                                                <span><b>QUANTITY {{$index+1}} | </b></span>
                                                                                <button class="customBtn smallerBtn" ng-click="removematquant(materialrel, $index)" style="color: red">[REMOVE]</button>
                                                                            </div>
                                                                            <div>
                                                                                <div class="inputwrapper">
                                                                                    <div class="inputlabel">MATH SYMBOL:</div>
                                                                                    <input class="input" type="text" ng-model="matquant.math_symbol"></input>
                                                                                    <div class="subinputwrapper">
                                                                                        <div class="setValue" mathjax-bind="matquant.math_symbol"></div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="inputwrapper">
                                                                                    <div class="inputlabel">DESCRIPTION:</div>
                                                                                    <textarea class="input" rows="1" cols="40" ng-model="matquant.description"></textarea>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="inputwrapper">
                                            <div class="inputlabel mainSectionSubSubTitle solverbg">
                                                <span>SOLVER AND COMPUTATIONAL TRANSLATION OF THE SPECIFICATIONS</span>
                                                <button class="customBtn smallerBtn showBtn" ng-show="expandedSolverComps.indexOf($index)<0" ng-click="expandSolverComp($index)">[SHOW]</button>
                                                <button class="customBtn smallerBtn hideBtn" ng-show="expandedSolverComps.indexOf($index)>-1" ng-click="collapseSolverComp($index)">[HIDE]</button>
                                            </div>
                                            <div class="subinputwrapper solverleftborder" ng-show="expandedSolverComps.indexOf($index)>-1">
                                                <div class="inputwrapper">
                                                    <div class="inputlabel">NUMERICAL SOLVER:</div>
                                                    <textarea class="input" rows="1" cols="50" ng-model="model.solver_comp_translation.numerical_solver"></textarea>
                                                </div>
                                                <div class="inputwrapper">
                                                    <div class="inputlabel">SOFTWARE TOOL:</div>
                                                    <textarea class="input" rows="1" cols="40" ng-model="model.solver_comp_translation.software_tool"></textarea>
                                                </div>
                                                <div class="inputwrapper">
                                                    <div class="inputlabel">TIME STEP:</div>
                                                    <textarea class="input" rows="1" cols="40" ng-model="model.solver_comp_translation.time_step"></textarea>
                                                </div>
                                                <div class="inputwrapper">
                                                    <div class="inputlabel">COMPUTATIONAL REPRESENTATION</div>
                                                    <div class="subinputwrapper">
                                                        <div class="inputwrapper">
                                                            <div class="inputlabel">PHYSICS EQUATION:</div>
                                                            <textarea class="input" rows="4" cols="50" ng-model="model.solver_comp_translation.computational_representation.physics_equation"></textarea>
                                                        </div>
                                                        <div class="inputwrapper">
                                                            <div class="inputlabel">MATERIAL RELATIONS:</div>
                                                            <textarea class="input" rows="4" cols="50" ng-model="model.solver_comp_translation.computational_representation.material_relations"></textarea>
                                                        </div>
                                                        <div class="inputwrapper nomarginbtm">
                                                            <div class="inputlabel">MATERIAL:</div>
                                                            <textarea class="input" rows="4" cols="50" ng-model="model.solver_comp_translation.computational_representation.material"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="inputwrapper">
                                                    <div class="inputlabel">COMPUTATIONAL BOUNDARY CONDITIONS:</div>
                                                    <textarea class="input" rows="4" cols="40" ng-model="model.solver_comp_translation.computational_boundary_conditions"></textarea>
                                                </div>
                                                <div class="inputwrapper nomarginbtm">
                                                    <div class="inputlabel">ADDITIONAL SOLVER PARAMETERS:</div>
                                                    <textarea class="input" rows="4" cols="40" ng-model="model.solver_comp_translation.additional_solver_params"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="inputwrapper">
                                            <div class="inputlabel mainSectionSubSubTitle postprocessbg">
                                                <span>POST PROCESSING</span>
                                                <button class="customBtn smallerBtn showBtn" ng-show="expandedPostProcessings.indexOf($index)<0" ng-click="expandPostProcessing($index)">[SHOW]</button>
                                                <button class="customBtn smallerBtn hideBtn" ng-show="expandedPostProcessings.indexOf($index)>-1" ng-click="collapsePostProcessing($index)">[HIDE]</button>
                                            </div>
                                            <div class="subinputwrapper postprocessleftborder" ng-show="expandedPostProcessings.indexOf($index)>-1">
                                                <div class="inputwrapper">
                                                    <div class="inputlabel">THE PROCESSED OUTPUT:</div>
                                                    <textarea class="input" rows="4" cols="50" ng-model="model.post_processing.processed_output"></textarea>
                                                </div>
                                                <div class="inputwrapper">
                                                    <div class="inputlabel">METHODOLOGIES:</div>
                                                    <textarea class="input" rows="4" cols="40" ng-model="model.post_processing.methodologies"></textarea>
                                                </div>
                                                <div class="inputwrapper">
                                                    <div class="inputlabel">MARGIN OF ERROR:</div>
                                                    <input class="input" type="text" ng-model="model.post_processing.error_margin"></input>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>